{"ast":null,"code":"var _jsxFileName = \"/Users/leanan/Desktop/coding/game-of-life/src/components/Main.js\";\nimport React, { useEffect, useState, useRef, useCallback } from 'react';\nimport Preset from './Preset';\nimport Grid from './Grid';\nimport produce from 'immer';\nimport { preset1, preset2, preset3, randomPreset, countNeighbors, wrapCellsAround } from '../utils/helper';\nimport img from '../assets/bracket.png';\n\nconst Main = () => {\n  const [grid, setGrid] = useState([]);\n  const [width, setWidth] = useState();\n  const [selectedPreset, setSelectedPreset] = useState('');\n  const selectedPresetRef = useRef(selectedPreset);\n  selectedPresetRef.current = selectedPreset;\n  const presets = [{\n    name: 'Spaceships',\n    func: preset1\n  }, {\n    name: 'Oscillators',\n    func: preset2\n  }, {\n    name: 'Glider Gun',\n    func: preset3\n  }, {\n    name: 'Randomize',\n    func: randomPreset\n  }];\n  const [reload, setReload] = useState(false);\n  const [simulate, setSimulate] = useState(false);\n  const simulateRef = useRef(simulate);\n  simulateRef.current = simulate;\n  const [generation, setGeneration] = useState(0);\n  useEffect(() => {\n    setWidth(window.innerWidth);\n    window.addEventListener('resize', handleResize);\n\n    if (!simulateRef.current) {\n      let arr = new Array(25);\n\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = new Array(75);\n      }\n\n      for (let i = 0; i < arr.length; i++) {\n        for (let j = 0; j < arr[i].length; j++) {\n          arr[i][j] = {\n            alive: false,\n            coor: [i, j],\n            age: 1\n          };\n        }\n      }\n\n      setGrid(arr);\n    }\n  }, [reload]);\n\n  const handleResize = () => {\n    setWidth(window.innerWidth);\n  };\n\n  const startSimulation = useCallback(selectedPreset => {\n    console.log('HERE', selectedPresetRef.current);\n\n    if (!simulateRef.current) {\n      return;\n    }\n\n    setGeneration(num => num + 1);\n    setGrid(grid => {\n      return produce(grid, gridCopy => {\n        // make cells wrap around the grid \n        // if it's glider gun pattern don't wrap cells so that it runs infinitely\n        const coordinates = {};\n        let gliderGun = false;\n\n        if (selectedPresetRef.current === 'Glider Gun') {\n          gliderGun = true;\n        }\n\n        wrapCellsAround(grid, coordinates, gliderGun);\n\n        for (let i = 0; i < grid.length; i++) {\n          for (let j = 0; j < grid[i].length; j++) {\n            if (grid[i][j].alive === true) {\n              countNeighbors(grid, gridCopy, coordinates, i, j, true);\n            }\n\n            if (grid[i][j].alive === false) {\n              countNeighbors(grid, gridCopy, coordinates, i, j, false);\n            }\n          }\n        }\n      });\n    });\n    setTimeout(() => {\n      startSimulation();\n    }, 0);\n  }, []);\n\n  const pauseSimulation = () => {\n    setSimulate(false);\n  };\n\n  const clearSimulation = () => {\n    setSimulate(false);\n    setReload(!reload);\n    setSelectedPreset('');\n    setGeneration(0);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, \"Game of Life\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontSize: '16px',\n      display: `${width > 500 ? 'block' : 'none'}`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, \"rules\"), /*#__PURE__*/React.createElement(\"img\", {\n    style: {\n      width: '65px',\n      height: '65px',\n      display: `${width > 500 ? 'block' : 'none'}`\n    },\n    src: img,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rules\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, \"1. live cell with fewer than two live neighbours dies (underpopulation)\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, \"2. live cell with more than three live neighbours dies (overpopulation)\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, \"3. dead cell with exactly three live neighbours becomes a live cell (reproduction)\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, \"4. live cell with two or three live neighbours lives on to the next generation\")))), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, \"__generation: # \", generation), /*#__PURE__*/React.createElement(Grid, {\n    grid: grid,\n    setGrid: setGrid,\n    width: width,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      setSimulate(!simulate);\n      simulateRef.current = true;\n      startSimulation(selectedPreset);\n    },\n    disabled: simulate ? true : false,\n    style: {\n      border: '1px solid #CC00FF'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, \"Play\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: pauseSimulation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, \"Pause\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: clearSimulation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, \"Clear\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"presets\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, presets.map((preset, i) => {\n    return /*#__PURE__*/React.createElement(Preset, {\n      preset: preset,\n      key: i,\n      setSelectedPreset: setSelectedPreset,\n      selectedPreset: selectedPreset,\n      setGrid: setGrid,\n      setGeneration: setGeneration,\n      selectedPresetRef: selectedPresetRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 20\n      }\n    });\n  }))));\n};\n\nexport default Main;","map":{"version":3,"sources":["/Users/leanan/Desktop/coding/game-of-life/src/components/Main.js"],"names":["React","useEffect","useState","useRef","useCallback","Preset","Grid","produce","preset1","preset2","preset3","randomPreset","countNeighbors","wrapCellsAround","img","Main","grid","setGrid","width","setWidth","selectedPreset","setSelectedPreset","selectedPresetRef","current","presets","name","func","reload","setReload","simulate","setSimulate","simulateRef","generation","setGeneration","window","innerWidth","addEventListener","handleResize","arr","Array","i","length","j","alive","coor","age","startSimulation","console","log","num","gridCopy","coordinates","gliderGun","setTimeout","pauseSimulation","clearSimulation","display","alignItems","fontSize","height","border","map","preset"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport Preset from './Preset';\nimport Grid from './Grid';\nimport produce from 'immer';\nimport { preset1, preset2, preset3, randomPreset, countNeighbors, wrapCellsAround } from '../utils/helper';\nimport img from '../assets/bracket.png';\n\n\nconst Main = () => {\n  const [grid, setGrid] = useState([]);\n  const [width, setWidth] = useState();\n\n  const [selectedPreset, setSelectedPreset] = useState('');\n  const selectedPresetRef = useRef(selectedPreset);\n  selectedPresetRef.current = selectedPreset;\n\n  const presets = [{name: 'Spaceships', func: preset1}, \n                   {name: 'Oscillators', func: preset2},\n                   {name: 'Glider Gun', func: preset3},\n                   {name: 'Randomize', func: randomPreset}]\n  const [reload, setReload] = useState(false);\n\n  const [simulate, setSimulate] = useState(false);\n  const simulateRef = useRef(simulate);\n  simulateRef.current = simulate;\n\n  const [generation, setGeneration] = useState(0);\n\n\n  useEffect(() => {\n    setWidth(window.innerWidth);\n    window.addEventListener('resize', handleResize);\n\n    if (!simulateRef.current) {\n      let arr = new Array(25);\n      \n      for(let i = 0; i < arr.length; i++) {\n        arr[i] = new Array(75)\n      }\n\n      for (let i = 0; i < arr.length; i++) {\n        for (let j = 0; j < arr[i].length; j++) {\n          arr[i][j] = {alive: false, coor: [i,j], age: 1}\n        }\n      }\n      setGrid(arr)\n\n    } \n\n  }, [reload])\n\n  const handleResize = () => {\n    setWidth(window.innerWidth);\n  }\n\n\n  const startSimulation = useCallback((selectedPreset) => {\n\n    console.log('HERE', selectedPresetRef.current)\n\n    if (!simulateRef.current) {\n      return \n    }\n\n    setGeneration((num) => num + 1)\n\n\n    setGrid(grid => {\n      return produce(grid, gridCopy => {\n\n        // make cells wrap around the grid \n        // if it's glider gun pattern don't wrap cells so that it runs infinitely\n        const coordinates = {};\n        let gliderGun = false;\n        if (selectedPresetRef.current === 'Glider Gun') {\n          gliderGun = true;\n        }\n        wrapCellsAround(grid, coordinates, gliderGun);\n        \n\n        for (let i = 0; i < grid.length; i++) {\n\n          for (let j = 0; j < grid[i].length; j++) {\n\n            if (grid[i][j].alive === true) {\n              countNeighbors(grid, gridCopy, coordinates, i, j, true)\n            }\n            if (grid[i][j].alive === false) {\n              countNeighbors(grid, gridCopy, coordinates, i, j, false)\n\n            }\n          }\n        }\n      });\n\n    });\n\n    setTimeout(() => {\n      startSimulation()\n    }, 0)\n\n  }, [])\n\n\n  const pauseSimulation = () => {\n    setSimulate(false)\n  }\n\n  const clearSimulation = () => {\n    setSimulate(false);\n    setReload(!reload);\n    setSelectedPreset('');\n    setGeneration(0);\n  }\n\n\n  return (\n    <div className=\"main-wrap\">\n\n      <header>\n        <h1>Game of Life</h1>\n        <div style={{display: 'flex', alignItems: 'center'}}>\n          <div style={{fontSize: '16px', display: `${width > 500 ? 'block' : 'none'}`}}>rules</div>\n          <img style={{width: '65px', height: '65px', display: `${width > 500 ? 'block' : 'none'}`}} src={img}/>\n          <div className=\"rules\">\n            <div>1. live cell with fewer than two live neighbours dies (underpopulation)</div>\n            <div>2. live cell with more than three live neighbours dies (overpopulation)</div>\n            <div>3. dead cell with exactly three live neighbours becomes a live cell (reproduction)</div>\n            <div>4. live cell with two or three live neighbours lives on to the next generation</div>\n          </div>\n        </div>\n      </header>\n\n      <h2>__generation: # {generation}</h2>\n\n      <Grid grid={grid} setGrid={setGrid} width={width}/>\n\n      <div className=\"buttons\">\n        <div className=\"btn-wrap\">\n          <button onClick={() => {\n                    setSimulate(!simulate);\n                    simulateRef.current = true;\n                    startSimulation(selectedPreset);\n                    }}\n                  disabled={simulate ? true : false} style={{border: '1px solid #CC00FF'}}>Play</button>\n          <button onClick={pauseSimulation}>Pause</button>\n          <button onClick={clearSimulation}>Clear</button>\n        </div>\n        <div className=\"presets\">\n          {presets.map((preset, i) => {\n\n            return <Preset preset={preset} key={i} \n                            setSelectedPreset={setSelectedPreset} \n                            selectedPreset={selectedPreset}\n                            setGrid={setGrid}\n                            setGeneration={setGeneration}\n                            selectedPresetRef={selectedPresetRef}\n                            />\n          })}\n        </div>\n\n      </div>\n\n    </div>\n  )\n}\n\nexport default Main"]},"metadata":{},"sourceType":"module"}